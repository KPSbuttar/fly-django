{% extends 'basepage/base.html' %}
{% load staticfiles i18n %}
{% block content %}

<!-- ---------- quiz ------------- -->
<div data-role="page" style="background-color:#fff;" id="course-quiz-begin">

    {% include 'basepage/top_menu.html' %}
    {% include 'basepage/side_menu.html' %}
    {% include "basepage/notification.html" %}
    <script type="text/javascript">
        $(document).ready(function(){
            loadUserData();
                          
            // Add a slight deley before detect any notications and load UI.
            setTimeout(function(){
                handle_fly_notifications();
            }, 500);
        });
    </script>

    <!-- CONTENT -->
    <div data-role="content" class="ui-content" role="main">
        <div class="text-center">
            <h2>{% trans "Quiz Finished!" %}</h2>
            <h4 class="quiz-score">{% trans "Score:" %} <span style="color:yellowgreen">{{ quiz_submission.final_mark }}%</span></h4>
            <div class="social-sharing">
                <share-button></share-button>
            </div>
            
            {% if quiz_submission.final_mark >= 100 %}
                <h5>{% trans "Perfect Quiz!" %}</h5><p>{% trans "All the questions where correct!" %}</p>
            {% else %}
                <div data-role="collapsible" style="margin-top:20px;" id="quiz-answers" style="background-color: #779ECB;color:#fff;">
                    <h4 style="background-color: #779ECB;">{% trans "Show Correct Answers" %}</h4>
                    <ul data-role="listview">
                        {% for question_submission in question_submissions.all %}
                        <li>
                            <h5>{% trans "Question" %} {{ question_submission.question.num }}</h5>
                            {% if question_submission.question.a_is_correct %}
                                <p>A - {{ question_submission.question.a }}</p>
                            {% endif %}
                            
                            {% if question_submission.question.b_is_correct %}
                            <p>B - {{ question_submission.question.b }}</p>
                            {% endif %}
                            
                            {% if question_submission.question.c_is_correct %}
                            <p>C - {{ question_submission.question.c }}</p>
                            {% endif %}
                            
                            {% if question_submission.question.d_is_correct %}
                            <p>D - {{ question_submission.question.d }}</p>
                            {% endif %}
                            
                            {% if question_submission.question.e_is_correct %}
                            <p>E - {{ question_submission.question.e }}</p>
                            {% endif %}
                            
                            {% if question_submission.question.f_is_correct %}
                            <p>F - {{ question_submission.question.f }}</p>
                            {% endif %}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        </div>
    </div>
    <!-- end CONTENT -->

    <!-- Footer -->
    <div data-role="footer"
        data-theme="b"
     data-position="fixed"
           data-id="footer-nav"
    data-tap-toggle="false">
        <button onclick="window.location='/{{ request.language }}/quiz/{{ quiz_id }}/';"
                  class="btnCloseQuiz ui-btn ui-corner-all ui-icon-edit ui-btn-icon-left fleft m5"
                  style="background-color:darkred;">
            {% trans "Try Again" %}
        </button>
        <button id="btnBeginQuiz"
           onclick="window.location='/{{ request.language }}/course/{{ quiz_submission.course.id }}/';"
             class="ui-btn ui-corner-all ui-icon-check ui-btn-icon-left fright m5"
             style="background-color:green;">
            {% trans "Finish Quiz" %}
        </button>
    </div>
    <!-- end Footer -->

</div><!-- /page -->

{% endblock content %}